---
layout: post
title: "Blogging with Git Flow"
teaser: "Since a while we use Git Flow in our projects at the YooApps. Git Flow is a add-in for Git, that helps us to follow the feature branch process in a standard way. What if I would use Git Flow to to optimize my process to write and publish blog posts?"
author: "JÃ¼rgen Gutsch"
comments: true
image: /img/cardlogo-dark.png
tags: 
- Pretzel
- Blogging
---

Since a while we use [Git Flow](http://danielkummer.github.io/git-flow-cheatsheet/) in our projects at the [YooApps](http://yooapps.com). Git Flow is a add-in for Git, that helps us to follow the feature branch process in a standard way. We usually use our Jira ticket number as names for features, bugs or hotfix and we use the Jira Version as a Release name. This makes absolutely sense to us and makes the flow pretty transparent. We also use BitBucket to host our Git repositories, which is directly linked to Jira. That means on every Pull Request we have the direct link to the Jira ticket.

## Using Git Flow to release new posts

My idea is to also use Git Flow to release new blog posts. 

> My blog is generated by [Pretzel](https://github.com/Code52/pretzel), which is a Jekyll clone written in C#. I host it on an Azure Web Site. I write my posts in GitHub style Markdown files and push them to GitHub. Every time I push a new post, the Azure Web Site starts a new build and runs Pretzel to generate the static blog.
>
> I already wrote [some blog posts]({% post_url posting-with-pretzel.md %}) about [using Pretzel]({% post_url using-pretzel.md %})
>
> Dear hackers and bots: Because it is a static web site, it doesn't make sense to search for WordPress login pages or WordPress APIs on my blog ;)

Since almost one and a halve year now, I use Git on GitHub to publish my posts, but I only use the master branch yet and I don't commit the drafts. I sometimes write two or three post in parallel and I anyway have around ten drafts in the Pretzels _drafts folder. This feels a bit messy and I will probably loose my drafted posts, if the machine crashes.

Using Git Flow, I don't need to use the _drafts folder anymore. Every unfinished feature branch is a draft. If I finish a post, I would just need to finish the feature branch. If I want to publish the posts, I can start a new release.

Maybe the release step is a bit too much. But currently I need to push explicitly to publish a new post and it shouldn't be a big deal to also create a new release to merge all finished posts from develop to master. If it doesn't fit, it would be easy to switch to the more simple feature branches.

## Let's see how it works :-)

This blog post feature branch is created by using the following commands in the console:

~~~ shell
git flow feature start blogging-with-git-flow
~~~

Now I'm in the draft mode and will create the blog post file, writing, adding images, linking between existing posts and so on. If this is done I do a first commit and publish the feature branch to GitHub:

~~~ shell
git add _posts/*
git add img/*
git commit -m "new post about blogging with pretzel"
git flow feature publish
~~~

At this state I can change and commit as much as I want to. If I finish the blog post, I'm going to finish the post and push the current develop branch to GitHub:

~~~ shell
git flow feature finish
git push
~~~

The last step is publishing the posts. I currently not sure, but I could probably use the number of posts as the minor version number, which will also be used as tag for the release:

~~~ shell
git flow release start 1.48.0
git flow release finish
git push --all
git push --tags
~~~

(I possibly should create a batch command to execute the four lines to release new posts)

After that push, Pretzel will start "baking" the blog including the new blog post.

If I want to see the current drafts, I just need to display the existing branches:

![]({{ site.baseurl }}/img/blog-gitflow/blog-gitflow.png)

I'm sure this will be a clean way to publish and to handle the drafts and finished posts.

## Versioning

While publishing the [latest post]({% post_url unit-testing-with-dotnetcore.md %}) like this, I realized that GitHub actually will display a release in the GitHub repository, this is quite nice. This is not really needed but a funny fact and a reason why I wanna think a little more about the version numbers, if I release a new article.

My idea is to change the Major version, if I do a huge change on the layout of the blog or if I add a new feature. Because the layout is still the first version and I only did some really small changes, I'll keep it as version 1. For the minor version I will use the number of published articles. 

This doesn't really makes sense from the [semver](http://semver.org/) perspective, but blogging should also be fun and this really means is fun to me.

This means, with the [latest post]({% post_url unit-testing-with-dotnetcore.md %}) I published release 1.47.0 and this post will be in release 1.48.0 ;-)

## Authoring

In the last post about [writing blog posts using Pretzel]({% post_url posting-with-pretzel.md %}), I wrote that I use [MarkdownPad 2](http://markdownpad.com/) to write my pots. Unfortunately it seems that this editor is not longer maintained, no new version was published for a while. I paid for it, to have some more extended feature to use. Anyway, a few months ago it crashes every time I opened it and there was no way to get an updated or fixed version. (I'm pretty sure it was related to the installation of CefSharp.) This is why I now use [Typora](https://typora.io/), which is pretty minimalistic and lightweight. It works completely different, but in a pretty cool way. It doesn't use a splitted screen to edit and preview the content. With typora you write markdown code directly and it immediately translated it to the preview in the same editor view. It also supports custom CSS and different Markdown styles. It is real WYSIWYG.

![]({{ site.baseurl }}/img/blog-gitflow/blog-typora.png)

Any thoughts about it? Feel free to drop a comment and let me know :-)